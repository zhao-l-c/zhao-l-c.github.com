<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  
  <title>Archives: 2015 | LC的学习笔记</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  
    <meta name="author" content="zlc">
  
  
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="LC的学习笔记">
<meta property="og:url" content="http://yoursite.com/archives/2015/">
<meta property="og:site_name" content="LC的学习笔记">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="LC的学习笔记">
<meta name="twitter:description">

  
    <link rel="alternate" href="/atom.xml" title="LC的学习笔记" type="application/atom+xml">
  
  
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">

  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>

<body>
  <div class="wrapper">
    <header id="header">
  <div class="title">
    <h1><a href="/">LC的学习笔记</a></h1>
    <p><a href="/">主要把平时学习的内容整理为简单的教程，避免过目即忘</a></p>
  </div>
  <nav class="nav">
    <ul>
      
        <li><a href="/">Home</a></li>
      
        <li><a href="/archives">Archives</a></li>
      
      
        <li><a href="/atom.xml">RSS</a></li>
      
    </ul>
    <div class="clearfix"></div>
  </nav>
  <div class="clearfix"></div>
</header>
    <div class="content">


<h2 class="archives-title"><span>2015</span></h2>



  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2015/02/22/Database/Oracle/Oracle基础（二）：单行函数和分组函数/">
  <time datetime="2015-02-21T17:12:38.000Z">
    2月 22 2015
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2015/02/22/Database/Oracle/Oracle基础（二）：单行函数和分组函数/">Oracle基础（二）：单行函数和分组函数</a></h1>
  

  </header>
  
  <div class="entry">
    
      <h2 id="单行函数">单行函数</h2>
<p>单行函数就是只有一个输入参数。包括下面这些。</p>
<h3 id="字符函数">字符函数</h3>
<ul>
<li>lower转小写，upper转大写，initcap首字符大写：</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> <span class="keyword">lower</span>(<span class="string">'HELLO'</span>) <span class="keyword">lower</span>, <span class="keyword">upper</span>(<span class="string">'hello'</span>) <span class="keyword">upper</span>, initcap(<span class="string">'hello'</span>) initcap <span class="keyword">from</span> dual;</span></div><div class="line"><span class="comment">-- 结果</span></div><div class="line">    hello    HELLO    Hello</div></pre></td></tr></table></figure>

<ul>
<li>substr截取字符，：</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 从母串(下标从1开始)中的第4个字母开始去到右边所有</span></div><div class="line"><span class="operator"><span class="keyword">select</span> <span class="keyword">substr</span>(<span class="string">'HELLO,WORLD'</span>, <span class="number">4</span>) <span class="keyword">from</span> dual;</span></div><div class="line"><span class="comment">-- 从母串的第4个字母开始，取4个长度</span></div><div class="line"><span class="operator"><span class="keyword">select</span> <span class="keyword">substr</span>(<span class="string">'HELLO,WORLD'</span>, <span class="number">4</span>, <span class="number">4</span>) <span class="keyword">from</span> dual;</span></div></pre></td></tr></table></figure>

<ul>
<li>length获取字符个数，lengthb获取字节个数：</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> length(<span class="string">'中国'</span>), lengthb(<span class="string">'中国'</span>) <span class="keyword">from</span> dual;</span></div><div class="line"><span class="comment">-- 结果</span></div><div class="line">    2    4</div></pre></td></tr></table></figure>


<ul>
<li>insrt查找子串的位置，找到则返回下标：</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> <span class="keyword">instr</span>(<span class="string">'helloworld'</span>, <span class="string">'ow'</span>) <span class="keyword">from</span> dual;</span></div><div class="line"><span class="comment">-- 5</span></div></pre></td></tr></table></figure>

<ul>
<li>lpad左填充，rpad右填充：</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">select lpad('abcd',10,'<span class="keyword">*</span>');</div><div class="line">-- 结果</div><div class="line"><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span>abcd</div><div class="line">select rpad('abcd',10,'<span class="keyword">*</span>');</div><div class="line">-- 结果</div><div class="line">abcd<span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span></div></pre></td></tr></table></figure>


<ul>
<li>trim去掉左右两边的字符</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> <span class="keyword">trim</span>(<span class="string">'H'</span> <span class="keyword">from</span> <span class="string">'Hello worldH'</span>) <span class="keyword">from</span> dual;</span></div><div class="line"><span class="comment">-- 结果</span></div><div class="line">ello world</div></pre></td></tr></table></figure>


<ul>
<li>replace替换：</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">replace</span>(<span class="string">'hello world'</span>,<span class="string">'l'</span>,<span class="string">'*'</span>)</span></div><div class="line"><span class="comment">-- 结果</span></div><div class="line">he**o wor*d</div></pre></td></tr></table></figure>


<h3 id="数字函数">数字函数</h3>
<ul>
<li>round四舍五入：</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> <span class="keyword">round</span>(<span class="number">45.926</span>, <span class="number">2</span>), <span class="keyword">round</span>(<span class="number">45.926</span>, <span class="number">1</span>), <span class="keyword">round</span>(<span class="number">45.926</span>, <span class="number">0</span>), <span class="keyword">round</span>(<span class="number">45.926</span>, -<span class="number">1</span>), <span class="keyword">round</span>(<span class="number">45.926</span>, -<span class="number">2</span>) <span class="keyword">from</span> dual;</span></div><div class="line"><span class="comment">-- 结果：</span></div><div class="line">    45.93    45.9       46    50     0</div></pre></td></tr></table></figure>

<p>其中参数1：要四舍五入的数；参数2：保留几位小数，可以是正数、0、负数</p>
<ul>
<li>trunc截断：</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> trunc(<span class="number">123.456</span>, <span class="number">2</span>) <span class="keyword">from</span> dual;</span></div><div class="line"><span class="comment">-- 结果</span></div><div class="line">    123.45</div></pre></td></tr></table></figure>

<p>参数1：要截断的数；参数2：保留几位小数，可以是正数、0、负数。trunc类似round，只是不四舍五入。</p>
<ul>
<li>mod求余：</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> <span class="keyword">mod</span>(<span class="number">10</span>,<span class="number">3</span>) <span class="keyword">from</span> dual;</span></div><div class="line"><span class="comment">-- 结果</span></div><div class="line">    1</div></pre></td></tr></table></figure>


<h3 id="日期操作和函数">日期操作和函数</h3>
<p>Oracle的<code>sysdate</code>返回值既有日期部分，也有时间：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> <span class="keyword">sysdate</span> <span class="keyword">from</span> dual;</span></div><div class="line"><span class="comment">-- 结果</span></div><div class="line">2015/2/10 22:16:29</div></pre></td></tr></table></figure>


<ul>
<li>日期的数学运算：在日期上加上或减去一个数仍为日期：</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> (<span class="keyword">sysdate</span> - <span class="number">1</span>) <span class="keyword">as</span> yesterday, (<span class="keyword">sysdate</span>) today, (<span class="keyword">sysdate</span> + <span class="number">1</span>) tomorrow <span class="keyword">from</span> dual;</span></div><div class="line"><span class="comment">-- 结果</span></div><div class="line">    2015/2/9 22:14:26    2015/2/10 22:14:26    2015/2/11 22:14:26</div></pre></td></tr></table></figure>

<p><strong>注意：两个日期只能相减，不能相加。两个日期相减得到的是天数。</strong></p>
<ul>
<li>一些日期函数：<br>months_between返回两个日期之间相差的月数：</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> months_between(<span class="keyword">sysdate</span>, hiredate) <span class="keyword">from</span> dual;</span></div></pre></td></tr></table></figure>

<p>add_months在某个日期上加上指定的月数：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> add_months(<span class="keyword">sysdate</span>,<span class="number">123</span>) <span class="keyword">from</span> dual;</span></div></pre></td></tr></table></figure>

<p>next_day指定日期的下一个日期：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> next_day(<span class="keyword">sysdate</span>,<span class="string">'星期二'</span>) <span class="keyword">from</span> dual;</span></div></pre></td></tr></table></figure>

<p>last_day获取本月的最后一天：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> <span class="keyword">last_day</span>(<span class="keyword">sysdate</span>) <span class="keyword">from</span> dual;</span></div></pre></td></tr></table></figure>


<ul>
<li>round也可以对日期进行四舍五入：</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> <span class="keyword">round</span>(<span class="keyword">sysdate</span>, <span class="string">'month'</span>) A, <span class="keyword">round</span>(<span class="keyword">sysdate</span>, <span class="string">'year'</span>) B ,<span class="keyword">round</span>(<span class="keyword">sysdate</span>, <span class="string">'day'</span>) C <span class="keyword">from</span> dual;</span></div><div class="line"><span class="comment">-- 结果</span></div><div class="line">    2013/6/1    2013/1/1    2013/6/16</div></pre></td></tr></table></figure>

<p>trunc也可以对日期进行截取：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> trunc(<span class="keyword">sysdate</span>,<span class="string">'month'</span>) <span class="keyword">from</span> dual;</span></div></pre></td></tr></table></figure>



<h3 id="通用函数">通用函数</h3>
<p>这些函数适用于任何数据类型，同时也适用于空值。</p>
<ul>
<li>nvl：将空值转换成一个已知的值，可以使用的数据类型有日期、字符、数字。</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> nvl(<span class="literal">NULL</span>, <span class="string">'Null'</span>), nvl(dummy, <span class="string">'Null'</span>) <span class="keyword">from</span> dual;</span></div><div class="line"><span class="comment">-- 结果</span></div><div class="line">    Null     X</div></pre></td></tr></table></figure>

<ul>
<li>nvl2(expr1, expr2, expr3) ：但 expr1不为NULL，返回expr2；为NULL，返回expr3。</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> nvl2(<span class="keyword">NULL</span>, <span class="attribute">'not</span> <span class="keyword">null</span>', <span class="attribute">'null</span>') test,</div><div class="line">       nvl2(dummy, <span class="attribute">'not</span> <span class="keyword">null</span>', <span class="attribute">'null</span>') test2</div><div class="line">  from dual;</div><div class="line"><span class="comment">-- 结果</span></div><div class="line">    <span class="keyword">null</span>     <span class="keyword">not</span> <span class="keyword">null</span></div></pre></td></tr></table></figure>

<ul>
<li>nullif(expr1, expr2) :  若expr1和expr2的值相等返回NULL，否则返回expr1。</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> <span class="keyword">nullif</span>(<span class="number">10</span>, <span class="number">10</span>) eq, <span class="keyword">nullif</span>(<span class="number">10</span>, <span class="number">20</span>) noeq <span class="keyword">from</span> dual;</span></div><div class="line"><span class="comment">-- 结果</span></div><div class="line">              9</div></pre></td></tr></table></figure>

<ul>
<li>coalesce(expr1,expr2,…exprN)：从左到右找到第一个不为null的expr值。coalesce与nvl相比的优点在于coalesce可以同时处理交替的多个值。</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> <span class="keyword">coalesce</span>(<span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="number">22</span>, <span class="number">4</span>, <span class="literal">NULL</span>) <span class="keyword">first</span> <span class="keyword">from</span> dual;</span></div><div class="line"><span class="comment">-- 结果</span></div><div class="line">     22</div></pre></td></tr></table></figure>


<h3 id="转换函数">转换函数</h3>
<blockquote>
<p>参考资料<br><a href="http://www.cnblogs.com/neru/archive/2011/08/25/2153188.html" target="_blank" rel="external">oracle 类型转换函数 &amp; oracle 隐式转换规则总结</a></p>
</blockquote>
<p><strong>Oracle有三种最基本的数据类型，即字符型、数值型、日期型。</strong></p>
<h4 id="to_char">to_char</h4>
<p>数值、日期-&gt;字符型<br>语法：to_char(num | date, [format mask], [nls_parameters])</p>
<p>数字转换为字符的可以格式：</p>
<table>
<thead>
<tr>
<th>格式元素</th>
<th>元素说明</th>
<th>示例格式</th>
<th>输入数字</th>
<th>输出字符结果</th>
</tr>
</thead>
<tbody>
<tr>
<td>9</td>
<td>数字宽度</td>
<td>9999</td>
<td>12</td>
<td>12</td>
</tr>
<tr>
<td>0</td>
<td>显示前面的零</td>
<td>9999</td>
<td>12</td>
<td>12</td>
</tr>
<tr>
<td>.</td>
<td>小数点的位置</td>
<td>9999.999</td>
<td>30.4</td>
<td>30.4</td>
</tr>
<tr>
<td>D</td>
<td>小数点分隔符的位置(默认为句点)</td>
<td>09999D999</td>
<td>30.4</td>
<td>30.4</td>
</tr>
<tr>
<td>,</td>
<td>逗号的位置</td>
<td>9,999,999</td>
<td>3040</td>
<td>3,040</td>
</tr>
<tr>
<td>G</td>
<td>组分隔符的位置(默认为逗号)</td>
<td>09999G999</td>
<td>3040</td>
<td>3,040</td>
</tr>
<tr>
<td>\$</td>
<td>美元符号</td>
<td>\$99,999</td>
<td>3040</td>
<td>\$3,040</td>
</tr>
<tr>
<td>L</td>
<td>当地货币</td>
<td>L099999</td>
<td>3040</td>
<td>GBP003040如果nls_currency设置为GBP</td>
</tr>
<tr>
<td>MI</td>
<td>表示负数的减号的位置</td>
<td>99999MI</td>
<td>-3040</td>
<td>3040-</td>
</tr>
<tr>
<td>PR</td>
<td>包围在括号内的负数</td>
<td>99999PR</td>
<td>-3040</td>
<td><3040></3040></td>
</tr>
<tr>
<td>EEEE</td>
<td>科学计数法</td>
<td>99.99999EEEE</td>
<td>121.976</td>
<td>1.22E+02</td>
</tr>
<tr>
<td>U</td>
<td>Nls_dual_currency</td>
<td>U099999</td>
<td>3040</td>
<td>CAD003040如果nls_dual_currency设置为CAD</td>
</tr>
<tr>
<td>V</td>
<td>乘以10n次(n是V之后9的数量)</td>
<td>9999V99</td>
<td>3040</td>
<td>304000</td>
</tr>
<tr>
<td>S</td>
<td>前面加上+或者-</td>
<td>S999999</td>
<td>3040</td>
<td>3040</td>
</tr>
</tbody>
</table>
<p>示例：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> to_char(<span class="number">0012.345</span>, <span class="string">'0999.9'</span>) <span class="keyword">as</span> <span class="string">"number"</span>  <span class="keyword">from</span> dual;</span></div><div class="line"><span class="comment">-- 结果</span></div><div class="line"> 0012.3</div></pre></td></tr></table></figure>

<p>日期转换为字符的可用格式(示例日期:02-JUN-1975)：</p>
<table>
<thead>
<tr>
<th>格式说明</th>
<th>说明</th>
<th>结果</th>
</tr>
</thead>
<tbody>
<tr>
<td>Y</td>
<td>年的最后一位</td>
<td>5</td>
</tr>
<tr>
<td>YY</td>
<td>年的最后两位</td>
<td>75</td>
</tr>
<tr>
<td>YYY</td>
<td>年的最后三位</td>
<td>975</td>
</tr>
<tr>
<td>YYYY</td>
<td>四位数字表示的年</td>
<td>1975</td>
</tr>
<tr>
<td>RR</td>
<td>两位数字表示的年</td>
<td>75</td>
</tr>
<tr>
<td>YEAR</td>
<td>区别大小写并用英语拼写的年</td>
<td>NINETEEN SEVENTY-FIVE</td>
</tr>
<tr>
<td>MM</td>
<td>两位数表示的月</td>
<td>6</td>
</tr>
<tr>
<td>MON</td>
<td>月的三个字母缩写</td>
<td>JUN</td>
</tr>
<tr>
<td>MONTH</td>
<td>区分大小写并用英语拼写的月</td>
<td>JUNE</td>
</tr>
<tr>
<td>D</td>
<td>星期几</td>
<td>2</td>
</tr>
<tr>
<td>DD</td>
<td>月的两位数日(即是本月的第几天)</td>
<td>2</td>
</tr>
<tr>
<td>DDD</td>
<td>年的日</td>
<td>153</td>
</tr>
<tr>
<td>DY</td>
<td>星期的三个字母缩写</td>
<td>MON</td>
</tr>
<tr>
<td>DAY</td>
<td>区分大小写并用英语拼写的星期</td>
<td>MONDAY</td>
</tr>
</tbody>
</table>
<p>示例：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> to_char(<span class="keyword">sysdate</span>, <span class="string">'yyyy-mm-dd hh24:mi:ss:mm day'</span>) <span class="keyword">from</span> dual;</span></div><div class="line"><span class="comment">-- 结果</span></div><div class="line">2013-06-13 17:40:19:06 星期四</div></pre></td></tr></table></figure>

<p>其中表示日期格式的字符串中可以添加用双引号括起的其它字符串：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> to_char(<span class="keyword">sysdate</span>,<span class="string">'yyyy-mm-dd hh24:mi:ss:mm" 今天是" day'</span>) <span class="keyword">from</span> dual;</span></div><div class="line"><span class="comment">-- 结果</span></div><div class="line">    2015-02-11 10:14:13:02 今天是 星期三</div></pre></td></tr></table></figure>

<h4 id="to_date">to_date</h4>
<p>字符值-&gt;日期值<br>语法：to_date (string, [format mask], [nls_parameters])。<br>掩码格式同使用to_char把日期转换为字符时的格式。</p>
<p>示例：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> to_date(<span class="string">'2015-01-01 13:14:20'</span>, <span class="string">'yyyy-MM-dd HH24:mi:ss'</span>) <span class="keyword">as</span> <span class="string">"date"</span></span></div><div class="line">  <span class="keyword">from</span> dual;</div><div class="line"><span class="comment">-- 结果</span></div><div class="line">2015/1/1 13:14:20</div></pre></td></tr></table></figure>


<h4 id="to_number">to_number</h4>
<p>字符值-&gt;数字值<br>语法：to_number (string,[format mask],[nls_parameters])<br>格式掩码同使用to_char把数字转换为字符时的格式。</p>
<p><strong>这是个奇怪的函数！！</strong></p>
<h3 id="隐式转换">隐式转换</h3>
<p>在Oracle中，如果不同的数据类型之间关联，如果不显式转换数据，则它会根据以下规则对数据进行隐式转换</p>
<ul>
<li>对于INSERT和UPDATE操作，Oracle会把插入值或者更新值隐式转换为字段的数据类型。<br>假如id列的数据类型为number：</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">update</span> <span class="keyword">t</span> <span class="keyword">set</span> id=<span class="string">'1'</span>; -&gt; 相当于 <span class="keyword">update</span> <span class="keyword">t</span> <span class="keyword">set</span> id=to_number(<span class="string">'1'</span>);</div><div class="line"># 插入</div><div class="line"><span class="built_in">insert</span> into <span class="keyword">t</span>(id) <span class="built_in">values</span>(<span class="string">'1'</span>); -&gt; <span class="built_in">insert</span> into <span class="keyword">t</span> <span class="built_in">values</span>(to_number(<span class="string">'1'</span>));</div></pre></td></tr></table></figure>


<ul>
<li>对于SELECT语句，<strong>当比较一个字符型和数值型的值时，Oracle会把字符型的值隐式转换为数值型！</strong></li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="preprocessor"># 如假设id列的数据类型为varchar2</span></div><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> t <span class="keyword">where</span> id=<span class="number">1</span>; -&gt; <span class="keyword">select</span> * <span class="keyword">from</span> t <span class="keyword">where</span> to_number(id)=<span class="number">1</span>;</div><div class="line"><span class="preprocessor"># 例如假设id列的数据类型为number</span></div><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> t <span class="keyword">where</span> id=<span class="string">'1'</span>; -&gt; <span class="keyword">select</span> * <span class="keyword">from</span> t <span class="keyword">where</span> id=to_number(<span class="string">'1'</span>);</div></pre></td></tr></table></figure>

<p><strong>也就是数字和字符见比较，最后都会变成数字和数字的比较，这个结论很重要！</strong><br>当比较字符型和日期型的数据时，Oracle会把字符型转换为日期型。<br>如假设create_date为字符型：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> t <span class="keyword">where</span> create_date &gt; sysdate; -&gt; <span class="keyword">select</span> * <span class="keyword">from</span> t <span class="keyword">where</span> to_date(create_date) &gt; sysdate;</div></pre></td></tr></table></figure>

<p><strong>注意，此时session的nls_date_format需要与字符串格式相符。</strong><br>假设create_date为date型：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> t <span class="keyword">where</span> create_date &gt; <span class="string">'2006-11-11 11:11:11'</span>; -&gt; <span class="keyword">select</span> * <span class="keyword">from</span> t <span class="keyword">where</span>   create_date &gt; to_date(<span class="string">'2006-11-11 11:11:11'</span>);</div></pre></td></tr></table></figure>


<ul>
<li>如果调用函数或过程等时，如果输入参数的数据类型与函数或者过程定义的参数数据类型不一直，则Oracle会把输入参数的数据类型转换为函数或者过程定义的数据类型。<br>假设过程如下定义 p(p_1 number)：</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">exec</span> p(<span class="string">'1'</span>); -&gt; <span class="keyword">exec</span> p(to_number(<span class="string">'1'</span>));</div></pre></td></tr></table></figure>


<ul>
<li>赋值操作时，则Oracle会把等号右边的数据类型转换为左边的数据类型。</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var <span class="keyword">a</span> <span class="keyword">number</span> <span class="variable">a:</span>=<span class="string">'1'</span>; - &gt; <span class="variable">a:</span>=to_number(<span class="string">'1'</span>);</div></pre></td></tr></table></figure>


<ul>
<li>用连接操作符<code>||</code>时，Oracle会把非字符类型的数据转换为字符类型。</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> <span class="number">1</span>||<span class="string">'2'</span> <span class="keyword">from</span> dual; -&gt; <span class="keyword">select</span> to_char(<span class="number">1</span>)||<span class="string">'2'</span> <span class="keyword">from</span> dual;</div></pre></td></tr></table></figure>


<ul>
<li>如果字符类型的数据和非字符类型的数据(如number、date、rowid等)作算术运算，则Oracle会将字符类型的数据转换为合适的数据类型，这些数据类型可能是number、date、rowid等。如果CHAR/VARCHAR2 和NCHAR/NVARCHAR2之间作算术运算，则oracle会将她们都转换为number类型的数据再做比较。</li>
</ul>
<ul>
<li>比较CHAR/VARCHAR2 和NCHAR/NVARCHAR2时，如果两者字符集不一样，则默认的转换方式是将数据编码从数据库字符集转换为国家字符集。</li>
</ul>
<blockquote>
<p>简单总结：</p>
</blockquote>
<p>比较时，一般是字符型转换为数值型，字符型转换为日期型。</p>
<p>算术运算时，一般把字符型转换为数值型，字符型转换为日期型。</p>
<p>连接时<code>||</code>，一般是把数值型转换为字符型,日期型转换为字符型。</p>
<p>赋值、调用函数时，以定义的变量类型为准。</p>
<hr>
<h2 id="分组函数分组子句">分组函数分组子句</h2>
<p>分组函数也称为多行函数、组函数，作用是输入多行参数，得到一个结果。<br><strong>注意分组函数是自动虑空的，即只统计非NULL的。</strong></p>
<h3 id="常见分组函数">常见分组函数</h3>
<ul>
<li>求和sum</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> <span class="keyword">sum</span>(sal) <span class="keyword">from</span> dual;</span></div></pre></td></tr></table></figure>


<ul>
<li>求平均值avg</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> <span class="keyword">avg</span>(sal) <span class="keyword">from</span> dual;</span></div></pre></td></tr></table></figure>

<p>下面的语句结果是不一样的，原因就是分组函数会过滤NULL值：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 直接使用分组函数计算平均值，commission_pct列中有空值</span></div><div class="line"><span class="operator"><span class="keyword">select</span> <span class="keyword">avg</span>(commission_pct) <span class="keyword">from</span> employees;</span></div><div class="line"><span class="comment">-- 用公式计算平均值</span></div><div class="line"><span class="operator"><span class="keyword">select</span> <span class="keyword">sum</span>(commission_pct)/<span class="keyword">count</span>(*) <span class="keyword">from</span> employees;</span></div></pre></td></tr></table></figure>

<p><strong>解决方法是结合<code>nvl</code>函数使分组函数处理空值</strong>：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> <span class="keyword">avg</span>(nvl(commission_pct, <span class="number">0</span>)) <span class="keyword">from</span> employees;</span></div></pre></td></tr></table></figure>


<ul>
<li>记录数count</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> emp</span></div></pre></td></tr></table></figure>

<p>查询非空且不重复的department_id：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">select count(<span class="keyword">distinct</span> department_id) <span class="keyword">from</span> employees;</div></pre></td></tr></table></figure>

<p>这里discinct的结果中有可能有空值，所以最后用count统计就会去掉空值。</p>
<ul>
<li>最大值max和最小值min，可以对任意数据类型的数据使用min和max函数，包括日期：</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> <span class="keyword">max</span>(sal) <span class="keyword">from</span> emp;</span></div><div class="line"><span class="operator"><span class="keyword">select</span> <span class="keyword">min</span>(sal) <span class="keyword">from</span> emp;</span></div><div class="line"><span class="comment">-- 对日期使用max也是合法的</span></div><div class="line"><span class="operator"><span class="keyword">select</span> <span class="keyword">max</span>(<span class="keyword">sysdate</span>) <span class="keyword">from</span> dual;</span></div></pre></td></tr></table></figure>


<p><strong>最后注意不能在WHERE子句中使用组函数，但可以在HAVING子句中使用组函数</strong>，例如：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 这是错误的</span></div><div class="line"><span class="operator"><span class="keyword">SELECT</span> department_id, <span class="keyword">AVG</span>(salary)</span></div><div class="line">  <span class="keyword">FROM</span> employees</div><div class="line"><span class="keyword">WHERE</span> <span class="keyword">AVG</span>(salary) &gt; <span class="number">8000</span></div><div class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id;</div><div class="line"></div><div class="line"><span class="comment">-- 下面则是正确的</span></div><div class="line"><span class="operator"><span class="keyword">SELECT</span> department_id, <span class="keyword">AVG</span>(salary)</span></div><div class="line">  <span class="keyword">FROM</span> employees</div><div class="line"><span class="keyword">HAVING</span> <span class="keyword">AVG</span>(salary) &gt; <span class="number">8000</span></div><div class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id;</div></pre></td></tr></table></figure>



<h3 id="GROUP_BY分组子句">GROUP BY分组子句</h3>
<p>示例：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> department_id, <span class="keyword">AVG</span>(salary) <span class="keyword">FROM</span> employees <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id ;</span></div></pre></td></tr></table></figure>


<p>注意：</p>
<ul>
<li>在SELECT子句中所有没有包含在组函数中的列，都必须包含在GROUP BY子句中；而GROUP BY子句的内容则不一定要出现在SELECT子句中。<br>例如：</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> department_id, a, b, <span class="keyword">avg</span>(salary) <span class="keyword">from</span> employees <span class="keyword">group</span> <span class="keyword">by</span> department_id, a, b, x;</span></div></pre></td></tr></table></figure>

<p>示例中的department_id, a, b 都没有在组函数中，所以必须在GROUP BY子句里面包含，而x 则可以不出现在SELECT子句里面。<br><strong>MySQL中没有这条规定，也就是SELECT查询的字段可以不出现在GROUP BY子句中。</strong></p>
<ul>
<li>如果GROUP BY子句有多个条件，则默认先按第一个条件分组，相等时按第二个条件再分组。与ORDER BY是一致的。<br>例如：</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> nvl(department_id, <span class="number">0</span>) depart_id, job_id, <span class="keyword">avg</span>(salary) avg_sal <span class="keyword">from</span> employees <span class="keyword">group</span> <span class="keyword">by</span> department_id, job_id;</span></div></pre></td></tr></table></figure>


<ul>
<li>GROUP BY子句书必须写在WHERE子句后面。</li>
</ul>
<h3 id="HAVING过滤查找子句">HAVING过滤查找子句</h3>
<p>HAVING作用于GROUP BY中的列或者使用分组函数，目的是过滤查找一些符合条件的信息，示例：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">SELECT</span> department_id, <span class="keyword">MAX</span>(salary)</span></div><div class="line">  <span class="keyword">FROM</span> employees</div><div class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</div><div class="line"><span class="keyword">HAVING</span> <span class="keyword">MAX</span>(salary) &gt; <span class="number">10000</span>;</div></pre></td></tr></table></figure>

<p><strong>其实HAVING可以放在GROUP BY前面或者后面</strong>，例如上面的例子中把HAVING放在GROUP BY前面照样执行成功。<strong>查询它们的执行计划就会发现是一样的，结果都是先进行分组（hash group by），然后过滤（filter）。但一般放在GROUP BY后面，因为HAVING子句中的列要在分组函数或者分组表达式中。</strong></p>
<blockquote>
<p>HAVING和WHERE的区别：</p>
<ul>
<li>如果过滤条件要用组函数，只能使用HAVING，不能使用WHERE；</li>
<li>HAVING中的列要不使用组函数，要不就在GROUP BY子句中，否则是错误的；而WHERE中的列可以不再GROUP BY子句中；</li>
<li>在HAVING和WHERE都能达到目的的情况下，建议使用WHERE，因为效率更高。</li>
</ul>
</blockquote>
<p>例如下面的例子中，使用WHERE的明显比HAVING的效率高，可以通过执行计划查看：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 使用where先过滤结果后用group by分组</span></div><div class="line"><span class="operator"><span class="keyword">select</span> department_id, <span class="keyword">avg</span>(salary) <span class="keyword">from</span> employees</span></div><div class="line"><span class="keyword">where</span> department_id = <span class="number">10</span></div><div class="line"><span class="keyword">group</span> <span class="keyword">by</span> department_id</div><div class="line"> </div><div class="line"><span class="comment">-- 使用group by先分组，后用having过滤结果</span></div><div class="line"><span class="keyword">select</span> department_id, <span class="keyword">avg</span>(salary) <span class="keyword">from</span> employees</div><div class="line"><span class="keyword">group</span> <span class="keyword">by</span> department_id</div><div class="line"><span class="keyword">having</span> department_id = <span class="number">10</span></div></pre></td></tr></table></figure>

<h3 id="ROLLUP和CUBE函数">ROLLUP和CUBE函数</h3>
<blockquote>
<p>参考资料<br><a href="http://oracle-base.com/articles/misc/rollup-cube-grouping-functions-and-grouping-sets.php" target="_blank" rel="external">ROLLUP, CUBE, GROUPING Functions and GROUPING SETS</a><br><a href="http://docs.oracle.com/cd/B19306_01/server.102/b14223/aggreg.htm" target="_blank" rel="external">SQL for Aggregation in Data Warehouses</a></p>
</blockquote>
<p>结合下面的示例理解ROLLUP和CUBE：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- rollup</span></div><div class="line"><span class="operator"><span class="keyword">SELECT</span> department_id, job_id, <span class="keyword">SUM</span>(salary) <span class="keyword">FROM</span> employees <span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">ROLLUP</span>(department_id, job_id);</span></div><div class="line"><span class="comment">-- 等价于</span></div><div class="line"><span class="operator"><span class="keyword">select</span> department_id, job_id, <span class="keyword">sum</span>(salary) <span class="keyword">from</span> employees <span class="keyword">group</span> <span class="keyword">by</span> department_id, job_id</span></div><div class="line"><span class="keyword">union</span></div><div class="line"><span class="keyword">select</span> department_id, to_char(<span class="literal">null</span>), <span class="keyword">sum</span>(salary) <span class="keyword">from</span> employees <span class="keyword">group</span> <span class="keyword">by</span> department_id</div><div class="line"><span class="keyword">union</span></div><div class="line"><span class="keyword">select</span> to_number(<span class="literal">null</span>), to_char(<span class="literal">null</span>), <span class="keyword">sum</span>(salary) <span class="keyword">from</span> employees <span class="keyword">group</span> <span class="keyword">by</span> <span class="literal">null</span>;</div><div class="line"> </div><div class="line"><span class="comment">-- cube</span></div><div class="line"><span class="operator"><span class="keyword">SELECT</span> department_id, job_id, <span class="keyword">SUM</span>(salary) <span class="keyword">FROM</span> employees <span class="keyword">GROUP</span> <span class="keyword">BY</span> CUBE(department_id, job_id);</span></div><div class="line"><span class="comment">-- 等价于</span></div><div class="line"><span class="operator"><span class="keyword">select</span> department_id, job_id, <span class="keyword">sum</span>(salary) <span class="keyword">from</span> employees <span class="keyword">group</span> <span class="keyword">by</span> department_id, job_id</span></div><div class="line"><span class="keyword">union</span></div><div class="line"><span class="keyword">select</span> department_id, to_char(<span class="literal">null</span>), <span class="keyword">sum</span>(salary) <span class="keyword">from</span> employees <span class="keyword">group</span> <span class="keyword">by</span> department_id</div><div class="line"><span class="keyword">UNION</span></div><div class="line"><span class="keyword">select</span> to_number(<span class="literal">NULL</span>), job_id, <span class="keyword">sum</span>(salary) <span class="keyword">from</span> employees <span class="keyword">group</span> <span class="keyword">by</span> job_id</div><div class="line"><span class="keyword">UNION</span></div><div class="line"><span class="keyword">select</span> to_number(<span class="literal">null</span>), to_char(<span class="literal">null</span>), <span class="keyword">sum</span>(salary) <span class="keyword">from</span> employees <span class="keyword">group</span> <span class="keyword">by</span> <span class="literal">null</span>;</div></pre></td></tr></table></figure>

<h3 id="DECODE函数和条件表达式">DECODE函数和条件表达式</h3>
<p>DECODE函数可以作为条件表示式使用，它的格式为：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">DECODE(col | expression, search1, result1</div><div class="line">                    [, search2, result2,<span class="keyword">...</span>,]</div><div class="line">                    [, default])</div></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> job_id,</span></div><div class="line">       salary ,</div><div class="line">       <span class="keyword">decode</span>(job_id,</div><div class="line">              <span class="string">'IT_PROC'</span>,</div><div class="line">              salary + <span class="number">9999</span>,</div><div class="line">              <span class="string">'AD_VP'</span>,</div><div class="line">              salary + <span class="number">8888</span>,</div><div class="line">              salary + <span class="number">7777</span>) <span class="keyword">as</span> new_salary</div><div class="line">  <span class="keyword">from</span> employees</div></pre></td></tr></table></figure>

<p>CASE表达式也能实现相同的功能，格式：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">CASE</span> expr <span class="keyword">WHEN</span> comparison_expr1 <span class="keyword">THEN</span> return_expr1</div><div class="line">         [<span class="keyword">WHEN</span> comparison_expr2 <span class="keyword">THEN</span> return_expr2</div><div class="line">          <span class="keyword">WHEN</span> comparison_exprn <span class="keyword">THEN</span> return_exprn</div><div class="line">          <span class="keyword">ELSE</span> else_expr]</div><div class="line"><span class="keyword">END</span></div></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight `"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="operator"><span class="keyword">select</span> job_id,</span></div><div class="line">       salary <span class="keyword">as</span> <span class="string">"涨前薪水"</span>,</div><div class="line">       <span class="keyword">case</span> job_id</div><div class="line">         <span class="keyword">when</span> <span class="string">'IT_PROC'</span> <span class="keyword">then</span></div><div class="line">          salary + <span class="number">9999</span></div><div class="line">         <span class="keyword">when</span> <span class="string">'AD_VP'</span> <span class="keyword">then</span></div><div class="line">          salary + <span class="number">8888</span></div><div class="line">         <span class="keyword">else</span></div><div class="line">          salary + <span class="number">777</span></div><div class="line">       <span class="keyword">end</span> <span class="keyword">as</span> <span class="string">"涨后薪水"</span></div><div class="line">  <span class="keyword">from</span> employees;</div></pre></td></tr></table></figure>


    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2015/02/15/Database/Oracle/Oracle基础（一）：查询、过滤、排序操作/">
  <time datetime="2015-02-14T17:12:38.000Z">
    2月 15 2015
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2015/02/15/Database/Oracle/Oracle基础（一）：查询、过滤、排序操作/">Oracle基础（一）：查询、过滤、排序操作</a></h1>
  

  </header>
  
  <div class="entry">
    
      <h3 id="SQL语句">SQL语句</h3>
<p>SQL语句分为以下三种类型：</p>
<ul>
<li><p>DML: Data Manipulation Language 数据操纵语言。<br>DML用于查询与修改数据记录，包括如下SQL语句：</p>
<ul>
<li>INSERT：添加数据到数据库中；</li>
<li>UPDATE：修改数据库中的数据；</li>
<li>DELETE：删除数据库中的数据；</li>
<li>SELECT：选择（查询）数据。</li>
</ul>
</li>
<li><p>DDL:  Data Definition Language 数据定义语言。<br>DDL用于定义数据库的结构，比如创建、修改或删除数据库对象，包括如下SQL语句：</p>
<ul>
<li>CREATE TABLE：创建数据库表；</li>
<li>ALTER  TABLE：更改表结构、添加、删除、修改列长度；</li>
<li>DROP TABLE：删除表；</li>
<li>CREATE INDEX：在表上建立索引；</li>
<li>DROP INDEX：删除索引。</li>
</ul>
</li>
<li><p>DCL:  Data Control Language 数据控制语言。<br>DCL用来控制数据库的访问，包括如下SQL语句：</p>
<ul>
<li>GRANT：授予访问权限；</li>
<li>REVOKE：撤销访问权限；</li>
<li>COMMIT：提交事务处理；</li>
<li>ROLLBACK：事务处理回退；</li>
<li>SAVEPOINT：设置保存点；</li>
<li>LOCK：对数据库的特定部分进行锁定。</li>
</ul>
</li>
</ul>

    
  </div>
  <footer class="end-sep">
    
      
        <div class="alignleft">
          <a href="/2015/02/15/Database/Oracle/Oracle基础（一）：查询、过滤、排序操作/#more" class="more-link">Read More</a>
        </div>
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2015/02/14/Java/JDBC/JDBC详解（一）/">
  <time datetime="2015-02-14T15:03:16.000Z">
    2月 14 2015
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2015/02/14/Java/JDBC/JDBC详解（一）/">JDBC详解（一）</a></h1>
  

  </header>
  
  <div class="entry">
    
      <h2 id="JDBC_API">JDBC API</h2>
<p>下面介绍了常用的JDBC API：</p>
<ul>
<li>Driver</li>
<li>Connection</li>
<li>DriverManager</li>
<li>Statement</li>
<li>PreparedStatement</li>
<li>ResultSet</li>
<li>ResultSetMetaData</li>
</ul>
<p>还介绍了使用反射的方法，根据属性名和属性值封装实体对象（也就是根据SQL语句的查询结果封装为实例对象）！</p>

    
  </div>
  <footer class="end-sep">
    
      
        <div class="alignleft">
          <a href="/2015/02/14/Java/JDBC/JDBC详解（一）/#more" class="more-link">Read More</a>
        </div>
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2015/02/14/hello-world/">
  <time datetime="2015-02-14T14:48:10.000Z">
    2月 14 2015
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2015/02/14/hello-world/">Hello World</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>Welcome to <a href="http://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="http://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="http://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">trobuleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick_Start">Quick Start</h2>
<h3 id="Create_a_new_post">Create a new post</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>

<p>More info: <a href="http://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run_server">Run server</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>

<p>More info: <a href="http://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate_static_files">Generate static files</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>

<p>More info: <a href="http://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy_to_remote_sites">Deploy to remote sites</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>

<p>More info: <a href="http://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  

  <nav id="pagination">
  
  
  <div class="clearfix"></div>
</nav>

</div>
  </div>
  <footer id="footer"><div class="copyright">
  
  &copy; 2015 <a href="/">zlc</a>
  
</div>
<div class="theme-copyright">
  Theme by <a href="https://github.com/orderedlist" target="_blank">orderedlist</a>
   | 
  Redesign by <a href="http://heroicyang.com/" target="_blank">Heroic Yang</a>
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script src="/js/scale.fix.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
  (function($){
    $('.fancybox').fancybox();
  })(jQuery);
</script>

</body>
</html>